<!DOCTYPE html>
<html lang="no">
<head>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galleri</title>
    <style>
        /* Common styles for all screen sizes */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            position: relative;
            background: url('/images/optimized/20230827-IMG_0018.jpg') no-repeat fixed;
            background-size: cover;
        }

        body::before {
            content: "";
            background: inherit no-repeat fixed;
            background-size: cover;
            filter: blur(5px);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        footer {
            display: none;
        }

        /* Adjustments for mobile screens */
        @media (max-width: 600px) {
            .gallery-img {
                max-width: 100px;
                max-height: 100px;
                margin: 20px;
            }
        }

        .gallery-img {
            max-width: 150px;
            max-height: 150px;
            width: auto;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.5s ease;
            cursor: pointer;
            margin: 75px;
            opacity: 1;
        }
        @media (max-width: 600px) {
            .gallery-img {
                max-width: 45%; /* Adjust this value to your preference */
                max-height: auto;
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Pill-shaped container with text -->
    <div class="pill-container">
        Ett år i Glomfjord
    </div>

    <!-- Buttons for each season -->
    <div class="season-buttons">
        <button class="season-button season-button-summer" onclick="scrollToSeason('summer')">Sommer</button>
        <button class="season-button season-button-fall" onclick="scrollToSeason('fall')">Høst</button>
        <button class="season-button season-button-winter" onclick="scrollToSeason('winter')">Vinter</button>
        <button class="season-button season-button-spring" onclick="scrollToSeason('spring')">Vår</button>
    </div>


    <!-- Tiny pill shape for "tilbake" -->
    <div class="tiny-pill">
        <a href="index.html">Tilbake</a>
    </div>

    <!-- Content container with fixed height and scrolling -->
    <div class="content-container" id="imageContainer">
        <!-- Your gallery content goes here -->

        <!-- JavaScript to dynamically fetch images from JSON and create image elements -->
        <script>
            const imageContainer = document.getElementById('imageContainer');
        
            // Fetch image filenames from the JSON file
            fetch('images.json')
                .then(response => response.json())
                .then(data => {
                    const imageFileNamesWithoutExtension = data.images;
        
                    // Iterate through the image file names and create image elements
                    imageFileNamesWithoutExtension.forEach(fileName => {
                        const img = document.createElement('img');
                        img.className = 'gallery-img';
                        img.src = `images/optimized/${fileName}.jpg`; // Load from the /images/optimized folder
        
                        // Determine alt text based on the file name pattern
                        let alt = '';
                        if (fileName.startsWith("202305") || fileName.startsWith("202306") || fileName.startsWith("202307") || fileName.startsWith("202308")) {
                            alt = 'summer';
                        } else if (fileName.startsWith("202309") || fileName.startsWith("202310") || fileName.startsWith("202311")) {
                            alt = 'fall';
                        } else if (fileName.startsWith("202312") || fileName.startsWith("202401") || fileName.startsWith("202402")) {
                            alt = 'winter';
                        } else if (fileName.startsWith("202403") || fileName.startsWith("202404")) {
                            alt = 'spring';
                        }
        
                        img.alt = alt;
        
                        // Open the image in a new tab when clicked
                        const link = document.createElement('a');
                        img.src = `images/optimized/${fileName}.jpg`; // Load from the /images/optimized folder
                        link.target = '_blank';
                        link.appendChild(img);
                        imageContainer.appendChild(link);
                        img.setAttribute('loading', 'lazy');
        
                        // Add hovering effect
                        toggleEffect(img);
                    });
                })
                .catch(error => console.error('Error fetching images:', error));
        
            function scrollToSeason(season) {
                const images = document.querySelectorAll('.gallery-img');
                let closestImage;
                let minDistance = Number.MAX_VALUE;
        
                images.forEach((img, index) => {
                    const imgSeason = img.alt.toLowerCase();
                    if (imgSeason === season) {
                        const distance = Math.abs(img.offsetTop - imageContainer.offsetTop);
                        if (distance < minDistance) {
                            minDistance = distance;
                            closestImage = img;
                        }
                    }
                });
        
                if (closestImage) {
                    closestImage.scrollIntoView({ behavior: 'smooth' });
                }
            }
        
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        
            const applyHoverEffect = (image) => {
                image.style.maxWidth = '180px';
                image.style.maxHeight = '180px';
                image.style.transform = 'scale(2)';
                image.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';
            };
        
            const removeHoverEffect = (image) => {
                image.style.maxWidth = '150px';
                image.style.maxHeight = '150px';
                image.style.transform = 'none';
                image.style.boxShadow = '0 0 5px rgba(0, 0, 0, 0.2)';
            };
        
            const toggleEffect = (image) => {
                if (isMobile) {
                    image.addEventListener('click', () => {
                        if (image.style.maxWidth === '150px') {
                            applyHoverEffect(image);
                        } else {
                            removeHoverEffect(image);
                        }
                    });
                } else {
                    image.addEventListener('mouseenter', () => applyHoverEffect(image));
                    image.addEventListener('mouseleave', () => removeHoverEffect(image));
                }
            };
        
        </script>
    </div>
</body>
</html>
